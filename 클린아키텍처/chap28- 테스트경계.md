# 테스트 경계 

## 시스템 컴포넌트인 테스트 
- 아키텍처 관점에서는 모든 테스트는 동일하다. (단위든 유닛이든..)
- 테스트는 태생적으로 의존성 규칙을 따른다. 
  - 의존성은 항상 테스트 대상이 되는 코드를 향하므로, 아키텍처상에서 가장 바깥쪽 원으로 생각할 수 있다.
  - 테스트는 시스템의 컴포넌트를 향해, 항상 원의 안쪽으로 의존
 - 테스트는 독립적으로 배포가 가능하다. 
   - 배포 독립성이 달리 필요하지 않은 시스템에서도 테스트는 독립적으로 배포 가능
 - 시스템 컴포넌트 중에서 테스트는 가장 고립되어 있다(시스템 운영에 필요하지 않음)
 
## 테스트를 고려한 설계
 - 테스트가 시스템의 설계와 잘 통합되지 않으면 테스트는 깨지기 쉽고, 시스템은 뻣뻣해져 변경하기 어려움
 - 시스템에 강하게 결합된 테스트라면 시스템이 변경될 때, 함께 변ㄴ경되어야 함 
 - 이러한 문제를 **깨지기 쉬운 테스트 문제**라고 한다. 
 - 하지만 소프트웨어 설계의 첫번째 규칙은 변동성이 있는 것에 의존하지 말라는 것이므로, 변경되기 쉬운 테스트에는 의존해선 안된다.

## 테스트 API 
테스트가 모든 업무 규칙을 검증하는 데 사용할 수 있도록 특화된 API 
- 해당 API는 사용자 인터페이스가 사용하는 인터랙터와 인터페이스 어댑터들의 상위 집합이 된다. 
- 이를 통해 테스트 구조를 어플레케이션 구조로부터 결합을 분리하는 것이 목표 

### 구조적 결합 
- 테스트 결합 중 가장 강한 결합이면서 가장 은밀하게 퍼져나가는 유형 
- 상용 클래스 혹은 메서드가 변경된다면, 딸려 있는 다수의 테스트가 다 변경되어야 함 
- 테스트 API를 통해 애플리케이션 구조를 테스트로부터 숨긴다. 
  - 이를 통해 상용 코드를 리팩터링 혹은 변화시켜도 테스트에는 영향을 주지 않도록 한다. 
- 시간이 지날수록 테스트는 계속 구체적이고 특화되고, 반대로 상용코드는 더 추상적이고 더 범용적인 형태로 변한다. 

